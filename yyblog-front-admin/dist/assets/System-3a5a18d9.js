import{r as T,a as U,b as m,e,w as a,f as s,o as g,d as c,i as r,F as _,z as b,D as k,j as A}from"./index-accd95a7.js";const K={__name:"System",setup(L){const{proxy:i}=A(),f={getSysSetting:"sysSetting/getSysSetting",saveSysSetting:"sysSetting/saveSysSetting",createZip:"sysSetting/createZip"},l=T({}),v=["京","津","冀","晋","蒙","辽","吉","黑","沪","苏","浙","皖","闽","赣","鲁","豫","鄂","湘","粤","桂","琼","渝","川","黔","滇","藏","陕","甘","青","宁","新","台","港","澳"],S={openCommentType:[{required:!0,message:"是否开启评论不能为空"}],changyanAppId:[{required:!0,message:"畅言appId不能为空"}],changyanAppKey:[{required:!0,message:"畅言appKey不能为空"}],gitPagesType:[{required:!0,message:"是否开启Git Pages不能为空"}],showIcp:[{required:!0,message:"是否开启公安备案和ICP备案信息不能为空"}],icpDomain:[{required:!0,message:"ICP备案域名不能为空"}],icpNo:[{required:!0,message:"ICP备案号不能为空"}],policeProvince:[{required:!0,message:"公安备案省份不能为空"}],policeNo:[{required:!0,message:"公安备案号不能为空"}]};(async()=>{let p=await i.Request({url:f.getSysSetting});p!=null&&Object.assign(l,p.data)})();const V=U(),I=()=>{V.value.validate(async p=>{if(!p)return!1;let t={};Object.assign(t,l),await i.Request({url:f.saveSysSetting,params:t})&&i.Message.success("保存成功")})},C=async()=>{let p=await i.Request({url:f.createZip});p&&(document.location.href="/api/file/download/"+p.data+"/"+encodeURI("静态页面.zip"))};return(p,t)=>{const u=s("el-radio"),y=s("el-radio-group"),n=s("el-form-item"),d=s("el-input"),P=s("el-option"),w=s("el-select"),q=s("el-button"),N=s("el-form");return g(),m("div",null,[e(N,{ref_key:"editFormRef",ref:V,style:{width:"50%"},model:l,rules:S,"label-width":"200px"},{default:a(()=>[e(n,{label:"是否开启评论/留言板",prop:"openCommentType"},{default:a(()=>[c("div",null,[e(y,{modelValue:l.openCommentType,"onUpdate:modelValue":t[0]||(t[0]=o=>l.openCommentType=o)},{default:a(()=>[e(u,{label:1},{default:a(()=>[r("是")]),_:1}),e(u,{label:0},{default:a(()=>[r("否")]),_:1})]),_:1},8,["modelValue"])])]),_:1}),l.openCommentType==1?(g(),m(_,{key:0},[e(n,{label:"畅言appId",prop:"changyanAppId"},{default:a(()=>[e(d,{maxLength:50,modelValue:l.changyanAppId,"onUpdate:modelValue":t[1]||(t[1]=o=>l.changyanAppId=o)},null,8,["modelValue"])]),_:1}),e(n,{label:"畅言appKey",prop:"changyanAppKey"},{default:a(()=>[e(d,{maxLength:50,modelValue:l.changyanAppKey,"onUpdate:modelValue":t[2]||(t[2]=o=>l.changyanAppKey=o)},null,8,["modelValue"])]),_:1})],64)):b("",!0),e(n,{label:"是否开启Git Pages",prop:"gitPagesType"},{default:a(()=>[c("div",null,[e(y,{modelValue:l.gitPagesType,"onUpdate:modelValue":t[3]||(t[3]=o=>l.gitPagesType=o)},{default:a(()=>[e(u,{label:1},{default:a(()=>[r("是")]),_:1}),e(u,{label:0},{default:a(()=>[r("否")]),_:1})]),_:1},8,["modelValue"])])]),_:1}),e(n,{label:"开启公安备案和ICP备案信息",prop:"showIcp"},{default:a(()=>[e(y,{modelValue:l.showIcp,"onUpdate:modelValue":t[4]||(t[4]=o=>l.showIcp=o)},{default:a(()=>[e(u,{label:1},{default:a(()=>[r("是")]),_:1}),e(u,{label:0},{default:a(()=>[r("否")]),_:1})]),_:1},8,["modelValue"])]),_:1}),l.showIcp==1?(g(),m(_,{key:1},[e(n,{label:"ICP备案域名",prop:"icpDomain"},{default:a(()=>[e(d,{maxLength:200,modelValue:l.icpDomain,"onUpdate:modelValue":t[5]||(t[5]=o=>l.icpDomain=o)},null,8,["modelValue"])]),_:1}),e(n,{label:"ICP备案号",prop:"icpNo"},{default:a(()=>[e(d,{maxLength:100,modelValue:l.icpNo,"onUpdate:modelValue":t[6]||(t[6]=o=>l.icpNo=o)},null,8,["modelValue"])]),_:1}),e(n,{label:"公安备案省份",prop:"policeProvince"},{default:a(()=>[e(w,{modelValue:l.policeProvince,"onUpdate:modelValue":t[7]||(t[7]=o=>l.policeProvince=o),clearable:"",showSearch:""},{default:a(()=>[(g(),m(_,null,k(v,(o,x)=>e(P,{label:o,value:o,key:x},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(n,{label:"公安备案号",prop:"policeNo"},{default:a(()=>[e(d,{maxLength:100,modelValue:l.policeNo,"onUpdate:modelValue":t[8]||(t[8]=o=>l.policeNo=o)},null,8,["modelValue"])]),_:1})],64)):b("",!0),e(n,{label:"下载静态页面"},{default:a(()=>[c("div",null,[c("a",{href:"javascript:void(0)",onClick:t[9]||(t[9]=o=>C()),class:"a-link"},"点击下载")])]),_:1}),e(n,null,{default:a(()=>[e(q,{type:"danger",onClick:I},{default:a(()=>[r("保存")]),_:1})]),_:1})]),_:1},8,["model"])])}}};export{K as default};
